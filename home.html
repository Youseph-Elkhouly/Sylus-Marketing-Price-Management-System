<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stylus Marketing - Home</title>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1e1e1e;
            color: #f0f0f0;
            box-sizing: border-box;
        }

        /* Header */
        header {
            background-color: #000000;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #da9d1b;
        }

        .logo {
            width: 200px;
            transition: transform 0.3s ease-in-out;
        }

        .logo:hover {
            transform: scale(1.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 20px;
            margin: 0;
            padding: 0;
        }

        nav a {
            color: #eca85a;
            text-decoration: none;
            font-weight: bold;
        }

        nav a:hover {
            color: #ffffff;
        }

        /* Main Section */
        main {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #da9d1b;
        }

        .section-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .section-card {
            background-color: #292929;
            border: 2px solid #da9d1b;
            border-radius: 8px;
            text-align: center;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .section-card img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            border-radius: 8px;
        }

        .section-card h3 {
            margin: 15px 0;
            font-size: 1.2rem;
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
        }

        /* Search Section */
        .search-section {
            display: none;
            margin-top: 30px;
            animation: slide-down 0.5s ease;
        }

        @keyframes slide-down {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #444;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #da9d1b;
            color: #1e1e1e;
        }

        tr:nth-child(even) {
            background-color: #292929;
        }

        tr:hover {
            background-color: #333;
        }

        .product-img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
        }

                /* Product Controls Section */
        .product-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .product-controls input {
            padding: 10px;
            border: 2px solid #da9d1b;
            background-color: #1e1e1e;
            color: #f0f0f0;
            border-radius: 5px;
            width: 300px;
        }

        .product-controls button {
            padding: 10px 20px;
            background-color: #da9d1b;
            color: #1e1e1e;
            border: none;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px;
            transition: 0.3s ease-in-out;
        }

        .product-controls button:hover {
            background-color: #f0b32f;
        }

        /* Forms */
        .form-container {
            background-color: #292929;
            border: 2px solid #da9d1b;
            border-radius: 8px;
            padding: 20px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .form-container h3 {
            color: #da9d1b;
            margin-bottom: 15px;
        }

        .form-container label {
            display: block;
            margin: 10px 0 5px;
        }

        .form-container input, .form-container select, .form-container textarea {
            width: 80%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #444;
            border-radius: 5px;
            background-color: #1e1e1e;
            color: #f0f0f0;
        }

        .form-container button {
            width: 100%;
            padding: 10px;
            background-color: #da9d1b;
            color: #1e1e1e;
            border: none;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px;
            transition: 0.3s ease;
        }

        .form-container button:hover {
            background-color: #f0b32f;
        }

                /* Password and Keyword Forms */
        .form-container {
            background-color: #292929;
            border: 2px solid #da9d1b;
            border-radius: 8px;
            padding: 20px;
            margin: 20px auto;
            max-width: 400px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .form-container h3 {
            color: #da9d1b;
            margin-bottom: 15px;
        }

        .form-container label {
            display: block;
            margin: 10px 0 5px;
        }

        .form-container input {
            width: 80%;
            padding: 7px;
            margin-bottom: 10px;
            border: 1px solid #444;
            border-radius: 5px;
            background-color: #1e1e1e;
            color: #f0f0f0;
        }

        .form-container button {
            width: 100%;
            padding: 10px;
            background-color: #da9d1b;
            color: #1e1e1e;
            border: none;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px;
            transition: 0.3s ease;
        }

        .form-container button:hover {
            background-color: #f0b32f;
        }



        /* Footer */
        footer {
            text-align: center;
            padding: 10px;
            background-color: #000000;
            color: #dbb768;
            margin-top: 20px;
            border-top: 2px solid #da9d1b;
        }
    </style>
</head>
<body>
    <header>
        <img src="Properlogo.png" alt="Stylus Marketing Logo" class="logo">
        <nav>
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="#suppliers">Suppliers</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2>Our Products</h2>
        <div class="product-controls">
            <!-- Search Feature -->
            <input type="text" id="search-bar" placeholder="Search products or keywords..." onkeyup="searchProducts()">
        
            <!-- Buttons -->
            <button onclick="toggleAddProduct()">Add Product</button>
            <button onclick="toggleRemoveProduct()">Remove Product</button>
        </div>
        
        <!-- Add Product Form -->
        <div id="add-product-form" class="form-container" style="display: none;">
            <h3>Add Product</h3>
            <label>Type of Product:</label>
            <select id="product-type">
                <option value="business">Business Cards</option>
                <option value="hoodies">Hoodies</option>
                <option value="tshirts">T-Shirts</option>
                <option value="collared-shirts">Collared Shirts</option>
                <option value="banners">Banners</option>
            </select>
            <label>Product Name:</label>
            <input type="text" id="product-name" placeholder="Enter product name">
            <label>Description:</label>
            <textarea id="product-description" placeholder="Enter product description"></textarea>
            <label>Keywords (comma-separated):</label>
            <input type="text" id="product-keywords" placeholder="e.g., cheapest, high-end">
            <label>Upload Image:</label>
            <input type="file" id="product-image" accept="image/*">
            <label>Details Link:</label>
            <input type="text" id="product-link" placeholder="Enter product details link">
            <button onclick="addProduct()">Submit</button>
        </div>
        
        
        <!-- Remove Product Form -->
        <div id="remove-product-form" class="form-container" style="display: none;">
            <h3>Remove Product</h3>
            <label>Product Name:</label>
            <input type="text" id="remove-product-name" placeholder="Enter product name to remove">
            <button onclick="removeProduct()">Remove</button>
        </div>

                <!-- Password Verification Modal -->
        <div id="password-form" class="form-container" style="display: none;">
            <label>Password:</label>
            <input type="password" id="admin-password" placeholder="Enter password">
            <button onclick="verifyPassword()">Submit</button>
        </div>

        <!-- Assign Keywords Form -->
        <div id="assign-keywords-form" class="form-container" style="display: none;">
            <h3>Assign Keywords</h3>
            <label>Product Name:</label>
            <input type="text" id="keyword-product-name" placeholder="Enter product name">
            <label>Keywords (comma-separated):</label>
            <input type="text" id="new-keywords" placeholder="e.g., cheapest, high-end">
            <button onclick="assignKeywords()">Assign Keywords</button>
        </div>

        

        <div class="section-container">
            <div class="section-card" onclick="openSection('business')">
                <img src="designphotos/design1.png" alt="Business Cards">
                <h3>Business Cards</h3>
            </div>
            <div class="section-card" onclick="openSection('hoodies')">
                <img src="designphotos/design2.webp" alt="Hoodies">
                <h3>Hoodies</h3>
            </div>
            <div class="section-card" onclick="openSection('tshirts')">
                <img src="designphotos/design3.avif" alt="T-Shirts">
                <h3>T-Shirts</h3>
            </div>
            <div class="section-card" onclick="openSection('collared-shirts')">
                <img src="designphotos/design4.png" alt="Collared Shirts">
                <h3>Collared Shirts</h3>
            </div>            
            <div class="section-card" onclick="openSection('banners')">
                <img src="designphotos\design5.jpeg" alt="Banners">
                <h3>Banners</h3>
            </div>

        </div>

        <!-- Business Cards Section -->
        <div id="business" class="search-section">
            <h2>Business Cards</h2>
            <table>
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    
                    
                </tbody>
            </table>
        </div>
        <div id="hoodies" class="search-section" style="display: none;">
            <h2>Hoodies</h2>
            <table>
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
        
        <!-- T-Shirts Section -->
        <div id="tshirts" class="search-section" style="display: none;">
            <h2>T-Shirts</h2>
            <table>
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>

        <!-- Collared Shirts Section -->
        <div id="collared-shirts" class="search-section" style="display: none;">
            <h2>Collared Shirts</h2>
            <table>
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
                
        <!-- Banners Section -->
        <div id="banners" class="search-section" style="display: none;">
            <h2>Banners</h2>
            <table>
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
                    

                    

                    
                    

    </main>

   

    <script>
        function openSection(sectionId) {
            const sections = document.querySelectorAll('.search-section');
            sections.forEach(section => section.style.display = 'none'); // Hide all sections
            document.getElementById(sectionId).style.display = 'block'; // Show the selected section
        }


                // Toggle Add Product Form
        function toggleAddProduct() {
            const addForm = document.getElementById('add-product-form');
            addForm.style.display = addForm.style.display === 'none' ? 'block' : 'none';
        }

        // Toggle Remove Product Form
        function toggleRemoveProduct() {
            const removeForm = document.getElementById('remove-product-form');
            removeForm.style.display = removeForm.style.display === 'none' ? 'block' : 'none';
        }

        document.addEventListener("DOMContentLoaded", loadProducts);

            // Load products
            // Load products
        async function loadProducts() {
            try {
                const response = await fetch('http://127.0.0.1:3000/products'); // Updated URL
                const products = await response.json();

                products.forEach(product => renderProductRow(product));
            } catch (error) {
                console.error('Error loading products:', error);
            }
        }


    // Add product
    // Add product
    async function addProduct() {
        const type = document.getElementById("product-type").value;
        const name = document.getElementById("product-name").value;
        const description = document.getElementById("product-description").value;
        const keywords = document.getElementById("product-keywords").value.split(',').map(k => k.trim());
        const link = document.getElementById("product-link").value;
        const imageInput = document.getElementById("product-image");

        if (!name || !description || !link || !imageInput.files[0]) {
            alert("Please fill all fields and upload an image.");
            return;
        }

        const reader = new FileReader();
        reader.onload = async function (e) {
            const product = {
                type, name, description, keywords, link, image: e.target.result
            };

            try {
                const response = await fetch('http://127.0.0.1:3000/products', { // Updated URL
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(product)
                });

                if (!response.ok) {
                    throw new Error('Failed to add product.');
                }

                const result = await response.json();
                renderProductRow(product);
                alert(result.message);
            } catch (error) {
                console.error('Error adding product:', error);
                alert('An error occurred while adding the product.');
            }
        };
        reader.readAsDataURL(imageInput.files[0]);
    }


    // Remove product
    // Remove product
    async function removeProduct() {
        const name = document.getElementById("remove-product-name").value;

        try {
            const response = await fetch('http://127.0.0.1:3000/products', { // Updated URL
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name })
            });

            if (!response.ok) {
                if (response.status === 404) {
                    alert('Product not found.');
                    return;
                }
                throw new Error('Failed to remove product.');
            }

            const result = await response.json();
            document.querySelectorAll("table tbody tr").forEach(row => {
                if (row.children[1].textContent === name) row.remove();
            });

            alert(result.message);
        } catch (error) {
            console.error('Error removing product:', error);
        }
    }


    // Helper function to render a product row
    function renderProductRow(product) {
        const tableBody = document.querySelector(`#${product.type} table tbody`);
        if (!tableBody) {
            console.error(`Table for product type "${product.type}" not found.`);
            return;
        }

        const newRow = `
            <tr>
                <td><img src="${product.image}" class="product-img" alt="${product.name}"></td>
                <td>${product.name}</td>
                <td>${product.description}</td>
                <td style="display: none;">${product.keywords.join(", ")}</td>
                <td><a href="${product.link}" target="_blank">View Details</a></td>
            </tr>
        `;
        tableBody.insertAdjacentHTML("beforeend", newRow);
    }

    // Load products on page load
    document.addEventListener("DOMContentLoaded", loadProducts);



    // Search Functionality
    function searchProducts() {
        const input = document.getElementById("search-bar").value.toLowerCase();
        const rows = document.querySelectorAll(`#business table tbody tr`);

        rows.forEach(row => {
            const name = row.children[1].textContent.toLowerCase();
            const description = row.children[2].textContent.toLowerCase();
            const keywords = row.children[3].textContent.toLowerCase();

            row.style.display = (name.includes(input) || description.includes(input) || keywords.includes(input))
                ? "" : "none";
        });
    }

    
        let passwordVerified = false; // Password state

    // Function to toggle password form
    function showPasswordForm(action) {
        passwordVerified = false; // Reset verification
        document.getElementById("password-form").style.display = "block";
        document.getElementById("password-form").dataset.action = action;
    }

    // Verify Password
    function verifyPassword() {
        const inputPassword = document.getElementById("admin-password").value;
        const correctPassword = "123"; // Admin Password

        if (inputPassword === correctPassword) {
            passwordVerified = true;
            document.getElementById("password-form").style.display = "none";
            alert("Password verified!");

            const action = document.getElementById("password-form").dataset.action;
            if (action === "add") toggleAddProduct();
            if (action === "remove") toggleRemoveProduct();
            if (action === "keywords") toggleAssignKeywords();
        } else {
            alert("Incorrect password. Try again.");
        }
    }

    // Add Product Form (Password Protected)
    function toggleAddProduct() {
        if (!passwordVerified) return showPasswordForm("add");
        document.getElementById("add-product-form").style.display = "block";
    }

    // Remove Product Form (Password Protected)
    function toggleRemoveProduct() {
        if (!passwordVerified) return showPasswordForm("remove");
        document.getElementById("remove-product-form").style.display = "block";
    }

    // Assign Keywords Form (Password Protected)
    function toggleAssignKeywords() {
        if (!passwordVerified) return showPasswordForm("keywords");
        document.getElementById("assign-keywords-form").style.display = "block";
    }

    // Assign Keywords to Existing Product
    function assignKeywords() {
        const name = document.getElementById("keyword-product-name").value.toLowerCase();
        const newKeywords = document.getElementById("new-keywords").value.toLowerCase();

        const rows = document.querySelectorAll(`#business table tbody tr`);
        let found = false;

        rows.forEach(row => {
            const productName = row.children[1].textContent.trim().toLowerCase();
            if (productName === name) {
                const keywordsCell = row.children[3];
                const existingKeywords = keywordsCell.textContent ? keywordsCell.textContent.split(", ") : [];
                const combinedKeywords = Array.from(new Set([...existingKeywords, ...newKeywords.split(",")]));
                keywordsCell.textContent = combinedKeywords.join(", ");
                found = true;
            }
        });

        if (found) {
            alert("Keywords assigned successfully!");
        } else {
            alert("Product not found.");
        }

        document.getElementById("assign-keywords-form").style.display = "none";
    }

    function openSection(sectionId) {
        const sections = document.querySelectorAll('.search-section');
        sections.forEach(section => section.style.display = 'none');
        document.getElementById(sectionId).style.display = 'block';
    }



    </script>
</body>
</html>
